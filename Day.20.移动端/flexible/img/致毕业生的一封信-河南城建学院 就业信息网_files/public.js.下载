//var apiUrl = "http://192.168.0.120:801";  //线下
//var apiUrl2 = "http://192.168.0.120:802";  //代理地址
//var collegeid = "5a990e7fd041fd54bc4c3058";
//var client_id = "5a7e9fa6bfb93ebae0fcd5a2";
//var apiUrl = "http://webapi.goworkla.cn";   //线上API接口
//var apiUrl2 = "http://agent.goworkla.cn";  //代理地址
//var collegeid = "5a990e7fd041fd54bc4c3058";
//var client_id = "5a7e9fa6bfb93ebae0fcd5a2";

// ajax get
function getData(url, value, api) {
    if (isNull(api))
        api = apihost;
    var deferred = $.Deferred();
    $.ajax({
        type: 'GET',
        url: api + url,
        success: function (data) {
            deferred.resolve(data);
        },
        error: function (data) {
            if (data.responseText == '' || data.responseText == null) {

            } else {
                if ((JSON.parse(data.responseText).Errcode) == '1016' || (JSON.parse(data.responseText).Errcode) == '1006') {
                    //alert('登录信息过期，请重新登录');
                    $('#loginModal').modal('show');
                    //localStorage.clear();
                    //document.location.href = 'Index'
                } else if ((JSON.parse(data.responseText).Errcode) == '1011') {
                    alert('当前账户没有使用此操作权限');

                    document.location.href = 'Index'
                } else if ((JSON.parse(data.responseText).Errcode) == '1021') {
                    alert('当前账户不存在或已删除，请联系管理员！');
                    localStorage.clear();
                    document.location.reload();
                }
            }
            deferred.reject(data);
        },
        headers: { "client_id": client_id, "access_token": access_token, "accountid": accountid },
        dataType: "json"
    });
    return deferred;
}
// ajax post
function postData(url, value) {
    var deferred = $.Deferred();
    $.ajax({
        type: 'POST',
        url: apihost + url,
        data: value,
        success: function (data) {
            console.log("postData success");
            deferred.resolve(data);
            //return false;
        },
        error: function (data, textStatus, errorThrown) {
            console.log("postData error");
            if (data.responseText == '' && data.status == 200) {//如果返回数据为空处理
                deferred.resolve(data);
            } else {
                if ((JSON.parse(data.responseText).Errcode) == '1016' || (JSON.parse(data.responseText).Errcode) == '1006') {
                    //alert('登录信息过期，请重新登录');
                    $('#loginModal').modal('show');
                    localStorage.clear();
                    document.location.href = 'Index'
                } else if ((JSON.parse(data.responseText).Errcode) == '1011') {
                    alert('当前账户没有使用此操作权');

                    document.location.href = 'Index'
                } else if ((JSON.parse(data.responseText).Errcode) == '1021') {
                    alert('当前账户不存在或已删除，请联系管理员！');
                    localStorage.clear();
                    document.location.reload();
                }
            }

            deferred.reject(data);
        },
        headers: { "client_id": client_id, "access_token": access_token, "accountid": accountid },
        dataType: "json"
    });

    return deferred;
}
// ajax agent post
function postDataByAgent(url, value) {
    var deferred = $.Deferred();
    $.ajax({
        type: 'POST',
        url: agenthost + url,
        data: value,
        success: function (data) {
            deferred.resolve(data);

        },
        error: function (data) {
            deferred.reject(data);
        },
        headers: { "client_id": clientSafeId, "access_token": access_token, "accountid": accountid },
        dataType: "json"
    });
    return deferred;
}
//改变ajax 数据提交类型
function buildPostParams(params) {
    var paramsArray = [];
    Object.keys(params).forEach(function (key) {
        if (params[key] instanceof Array) {
            params[key].forEach(function (val) {
                paramsArray.push(key + '[' + params[key].indexOf(val) + ']' + '=' + encodeURIComponent(val));
            });
        } else if (params[key] instanceof Object) {
            Object.keys(params[key]).forEach(function (keys) {
                paramsArray.push(key + '[' + keys + ']' + '=' + encodeURIComponent(params[key][keys]));
            })
        } else {
            paramsArray.push(key + '=' + encodeURIComponent(params[key]));
        }
    })
    params = paramsArray.join("&");
    return params;
}
// 对clientId进行编码处理
function convertDate(date) {
    var res = date.getFullYear() + ',' + (date.getMonth() + 1) + ',' + date.getDate() + ',' + date.getHours() + ',' + date.getMinutes() + ',' + date.getSeconds();
    return res;
}
// client id 加密
function EncryptUtilss(clientId) {
    //		var CryptoJS = window.CryptoJS;
    var data = clientId + '--' + this.convertDate(new Date());
    var key = CryptoJS.enc.Utf8.parse('607490BE-18CA-43D7-B11A-57E2621B');
    var iv = CryptoJS.enc.Utf8.parse('2D59831C-78AC-4227-B3F3-CE656636');

    var encrypted = CryptoJS.AES.encrypt(data, key, {
        iv: iv,
        mode: CryptoJS.mode.CBC,
        padding: CryptoJS.pad.Pkcs7
    });
    //		console.log(encrypted.ciphertext.toString(CryptoJS.enc.Base64))
    return encrypted.ciphertext.toString(CryptoJS.enc.Base64);
};
// 日期格式化
function dateFtt(fmt, date) { //时间格式处理
    var o = {
        "M+": date.getMonth() * 1 + 1,                 //月份   
        "d+": date.getDate(),                    //日   
        "h+": date.getHours(),                   //小时   
        "m+": date.getMinutes(),                 //分   
        "s+": date.getSeconds(),                 //秒   
        "q+": Math.floor((date.getMonth() + 3) / 3), //季度   
        "S": date.getMilliseconds()             //毫秒   
    };
    if (/(y+)/.test(fmt))
        fmt = fmt.replace(RegExp.$1, (date.getFullYear() + "").substr(4 - RegExp.$1.length));
    for (var k in o)
        if (new RegExp("(" + k + ")").test(fmt))
            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
    return fmt;
}
// 判断是否为null或为空字串
function isNull(text) {
    var t = typeof (text);
    if (t == "undefined"
        || text == null)
        return true;

    if (t == "string"
        && $.trim(text) == "")
        return true;

    return false;
}
//设置cookie
function setCookie(name, value, days, path, domain) {
    var exp = new Date();
    if (isNull(days))
        days = 30 * 24 * 60 * 60 * 1000;
    else
        days = days * 24 * 60 * 60 * 1000;
    exp.setHours(exp.getTime() + days);
    document.cookie = name + '=' + value + ';path=' + path + ';expires=' + exp.toUTCString() + 'domain=.' + domain;
}
// 得到cookie的值
function getCookie(name) {
    var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
    if (arr = document.cookie.match(reg))
        return unescape(arr[2]);
    else
        return null;
}
// 检查身份证号
function checkIDNum(id) {
    if (isNull(id)) {
        return '身份证号不能为空';
    }
    var reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
    if (reg.test(id) === false) {
        return ("身份证格式不正确");
    }
    return '';
}
// 是否PC端
function isPC() {
    //判断是否手机端访问
    var userAgentInfo = navigator.userAgent.toLowerCase();
    var Agents = ["android", "iphone",
        "symbianos", "windows phone",
        "ipad", "ipod"];
    for (var v = 0, len = Agents.length; v < len; v++) {
        if (userAgentInfo.indexOf(Agents[v]) >= 0) {
            return false;
        }
    }
    return true;
}
// 得到QueryString值
function getQueryString(name) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.href);
    if (results == null) {
        return "";
    }
    else {
        var text = decodeURIComponent(results[1]);
        return text;
    }
}
//空中宣讲会二维码改为缩略图
function showQrcode(url, acid) {
    if (!isNull(url)) {
        $("#preach-popup").attr("src", url + "&imageView2/0/w/150/h/150");
        $('#preach-popup-div').show()
    }
    else {
        var postUrl = "/miniprogram/qrcode/generate";
        var page = 'pages/subpackage/activitySub/aerialTalkDetail/aerialTalkDetail';
        var param = {
            sence: acid,
            page: page
        }
        postData(postUrl, param).then(function (data) {
           url=data.value;
            $("#preach-popup").attr("src", url +"&imageView2/0/w/150/h/150");
            $('#preach-popup-div').show()
        });
    }
};
// js日期格式化
function dateFormat(date, format) //author: meizz
{
    if (isNull(date))
        return '-';
    var d = new Date(date);
    var o = {
        "M+": d.getMonth() + 1, //month
        "d+": d.getDate(),    //day
        "h+": d.getHours(),   //hour
        "m+": d.getMinutes(), //minute
        "s+": d.getSeconds(), //second
        "q+": Math.floor((d.getMonth() + 3) / 3),  //quarter
        "S": d.getMilliseconds() //millisecond
    }
    if (/(y+)/.test(format)) format = format.replace(RegExp.$1, (d.getFullYear() + "").substr(4 - RegExp.$1.length));
    for (var k in o)
        if (new RegExp("(" + k + ")").test(format)) format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ("00" + o[k]).substr(("" + o[k]).length));
    return format;
}

var clientSafeId = EncryptUtilss(client_id), // client_id加密
    collegeid, // 登录高校ID
    access_token, // token
    refresh_token, // 刷新令牌
    accountid, // 账号id
    studentno, // 学生学号
    isOpen = undefined,
    user_mobile,
    user_type, // 用户类型
    user_name, // 用户名称
    tokenTimer; // 验证AccessToken计时器
$(function () {
    // 本地存储
    if (localStorage.getItem('access_token') != null)
        access_token = localStorage.getItem('access_token');
    if (localStorage.getItem('accountid') != null)
        accountid = localStorage.getItem('accountid');
    if (localStorage.getItem('user_type') != null)
        user_type = localStorage.getItem('user_type');
    if (localStorage.getItem('mobile') != null)
        user_mobile = localStorage.getItem('mobile');
    if (localStorage.getItem('name') != null) {
        user_name = localStorage.getItem('name');
    }
    //点击取消
    $('#cancel').click(function () {
        hideAlert()
        hideOverlay()
    });
    //

    //立即前往
    $('#goInfo').click(function () {
        hideAlert()
        hideOverlay()
        var token = localStorage.getItem('access_token')
        window.open(getStuDomainBySysVersion() + "/workspace/myCenter-studentInfo?token=" + token + "&formUrl=2");
    });
    var url = window.location.href;
    var islogin = isLogin();
    if (url.indexOf("nid") == -1 && url.indexOf("id") == -1) {
        if (islogin == true) {
            //判断学生信息是否完善,学生信息待完善提示
            getData("/student/talent").then(function (data) {
                if (data.audit_status == 0) {
                    showOverlay()
                    showAlert()
                } else {
                    hideOverlay()
                    hideAlert()
                }
            })
        }
    }
    loginStatus();
    //判断页面是否缩放
    var ratio = 0,
        screen = window.screen,
        ua = navigator.userAgent.toLowerCase();

    if (window.devicePixelRatio !== undefined) {
        ratio = window.devicePixelRatio;
    } else if (~ua.indexOf('msie')) {
        if (screen.deviceXDPI && screen.logicalXDPI) {
            ratio = screen.deviceXDPI / screen.logicalXDPI;
        }
    } else if (window.outerWidth !== undefined && window.innerWidth !== undefined) {
        ratio = window.outerWidth / window.innerWidth;
    }

    if (ratio) {
        ratio = Math.round(ratio * 100);
    }
    if (ratio != 100) {
        $('#alert').html('<div class="alert alert-warning"><a href="#" class= "close" data-dismiss="alert">&times;</a ><strong>警告！</strong>当前浏览器缩放比例不正常，可能降低您的浏览体验，使用“ctrl+0”或手动恢复默认缩放比例。</div >')
        //alert('当前浏览器缩放比例不正常，可能降低您的浏览体验，使用“ctrl+0”或手动恢复默认缩放比例')
    } else {
        $('#alert').empty()
    }
    //窗口尺寸调整事件
    $(window).resize(function () {
        var ratio = 0,
            screen = window.screen,
            ua = navigator.userAgent.toLowerCase();

        if (window.devicePixelRatio !== undefined) {
            ratio = window.devicePixelRatio;
        }
        else if (~ua.indexOf('msie')) {
            if (screen.deviceXDPI && screen.logicalXDPI) {
                ratio = screen.deviceXDPI / screen.logicalXDPI;
            }
        }
        else if (window.outerWidth !== undefined && window.innerWidth !== undefined) {
            ratio = window.outerWidth / window.innerWidth;
        }

        if (ratio) {
            ratio = Math.round(ratio * 100);
        }
        if (ratio != 100) {
            $('#alert').html('<div class="alert alert-warning"><a href="#" class= "close" data-dismiss="alert">&times;</a ><strong>警告！</strong>当前浏览器缩放比例不正常，可能降低您的浏览体验，使用“ctrl+0”或手动恢复默认缩放比例。</div >')

            //alert('当前浏览器缩放比例不正常，可能降低您的浏览体验，使用“ctrl+0”或手动恢复默认缩放比例')
        } else {
            $('#alert').empty()
        }
    });
    // 样式调整
    $(".tablist-title").each(function () {
        if ($(this).attr('idx') == 0) {
            $(this).addClass('tabTitle-left');
        }
    });
    $(".friendlinksimple-main").hover(function (e) {
        $(this).children().stop().slideToggle(200);
        $(this).css("background", "none")
    });
    $(".scenery-inner .imgs").eq(0).css("margin-left", "0px");
    //$(".p-left .po span.p-black.pp").eq(2).css("margin-left", "0px")
    // 鼠标悬停
    $('.share-module').find('li').mouseenter(function () {
        var index = $(this).index();
        $(this).addClass('fixedActive').siblings().removeClass('fixedActive');
        $('.share-type').find('.type-list').eq(index).show().siblings().hide();
    });
    $('.share-module').find('li').mouseleave(function () {
        var index = $(this).index();
        $(this).removeClass('fixedActive')
        $('.share-type').find('.type-list').eq(index).hide();
    });
    // 一级导航点击
    $("#level1industry").change(function () {
        $.get(apihost + "/dict/industry/" + $("#level1industry").val(),
            function (data) {
                var html = "";
                $("#register_industry").empty();
                $.each(data, function (i, item) {
                    html += "<option value='" + item.code + "'>" + item.text + "</option>"
                })
                $("#register_industry").append(html);
            });
    });
    //返回顶部
    $(".back-top").hide()
    $(window).scroll(function () {
        if ($(this).scrollTop() > 50) {
            $('.back-top').show();
        } else {
            $('.back-top').hide();
        }
    });
    $('.back-top').click(function () {
        $('html ,body').animate({ scrollTop: 0 }, 300);
        return false;
    });
    //搜索
    $("#img_search").on('click', function () {
        if ($("#input_search").val() != "" && $("#input_search").val() != undefined)
            window.location.href = "/module/search_result/keywords-" + encodeURI($("#input_search").val());
    });
    // 搜索
    $('#input_search').bind('keyup', function (event) {
        if (event.keyCode == "13") {
            //回车执行查询
            if ($("#input_search").val() != "" && $("#input_search").val() != undefined)
                window.location.href = "/module/search_result/keywords-" + encodeURI($("#input_search").val());
        }
    });
    /******************************** 登录相关Start ******************************************/

    // 打开登录模态框
    $('#loginBtn').click(function () {
        if (isLogin()) { alert('不能重复登录，请注销后登录！'); return; }
        authorizedLogin();
        $('#loginModal').modal('show');
    });
    $('.studentLogin').click(function () {
        if (isLogin()) { alert('不能重复登录，请注销后登录！'); return; }
        authorizedLogin();
        $('#loginModal').modal('show');
    });
    // 获取验证码
    $('#authCode').on('click', function () {
        if (isOpen === undefined) {
            // 手机号检验
            if (/^1[0-9]{10}$/.test($('#check_phone').val()) == true) {
                var value = {
                    "value": $('#check_phone').val()
                }
                postDataByAgent('/topsystem/smsvcode/app?sms_type=login', value);
                var countValue = 60;
                isOpen = true;
                $('#authCode').text(countValue)
                // 计时器
                var timer = setInterval(function () {
                    countValue = countValue - 1;
                    if (countValue >= 1) {
                        $('#authCode').text(countValue)
                        $('#authCode').attr('readonly', true)
                    } else {
                        $('#authCode').text('获取验证码')
                        $('#authCode').attr('readonly', false)
                        clearInterval(timer)
                        isOpen = undefined
                    }
                }, 1000)
            } else {
                alert('请填写正确的手机号')
            }
        } else {
        }
    });
    // 注销登录
    $('#exit').click(function () {
        //清理缓存
        localStorage.clear();
        //查询cookie
        var is_author = getCookie('isauthorizedlogin');
        if (!isNull(is_author) && eval(is_author.toLowerCase())) {
            var href = window.location.href;
            var isauther = href.indexOf('?authorization_code');
            if (isauther > -1) {
                isauther = href.substring(0, isauther - 1);
                window.location.href = "https://sso.goworkla.cn/home/loginout?callback=" + isauther + "";
            }
            else
                location.reload();
        }
        else {
            location.reload();
        }
    });

    /******************************** 登录相关End ******************************************/

    // 补充用户信息
    $('#studentAddInfoBtn').on('click', function () {
        var value = {
            "name": $('#name').val(),
            "gender": $('#sex').val()
        }
        var consultInfos = postData('/talent/onestep', value);
        consultInfos.then(function (data) {
            localStorage.setItem('accountid', data.accountid);
            localStorage.setItem('name', $('#name').val());
            localStorage.setItem('user_type', 'student');
            alert('信息已补全。')
            location.reload();
        })
    });
    clearInterval(tokenTimer);
    tokenTimer = setInterval(checkAccessToken, 300000);
    //监听url
    var source = window.location.href;
    if (("onhashchange" in window) && ((typeof document.documentMode === "undefined") || document.documentMode == 8)) {
        //支持onhashchange事件时
        if (source.indexOf("position_details") > 0 || (source.indexOf("companydetail") > 0)) {
        } else {
            window.onhashchange = bowerCount();
        }
    } else {
        if (source.indexOf("position_details") > 0 || (source.indexOf("companydetail") > 0)) {
        } else {
            bowerCount();
        };
    }
    //二维码隐藏
    $('#preach-popup-div').click(function () {
        $(this).hide();
    })
});
//遮罩层
//当前页面高度
function pageHeight() {
    return $('#body').height() + 10;
}
//当前页面宽度
function pageWidth() {
    return $('#body').width();
}
function showOverlay() {
    $("#box-mark").height(pageHeight());
    $("#box-mark").width(pageWidth());
    $("#box-mark").fadeTo(200, 0.5);
}
function hideOverlay() {
    $("#box-mark").fadeOut(200);
}
function showAlert() {
    $('#alertInfo').fadeIn(300);
}
function hideAlert() {
    $('#alertInfo').fadeOut(300);
}
// 验证AccessToken是否有效
function checkAccessToken() {
    if (isLogin()) {
        getData('/api/oauth2/auth?client_id=' + client_id + '&access_token=' + access_token).then(function (data) {
        }, function (data) {
            if (data.status == 200) {
                return;
            }
            clearInterval(tokenTimer);
            localStorage.clear();
            access_token = '';
            loginStatus();
        });
    } else {
        clearInterval(tokenTimer);
        loginStatus();
    }
}
// 登录状态判断
function isLogin() {
    if (!isNull(client_id) && !isNull(access_token) && !isNull(accountid) && !isNull(user_type)) return true;
    return false;
}
// 登录状态显示
function loginStatus() {
    var dom = document.getElementsByClassName('oDiv');
    if (dom.length == 0) {
        var body = document.getElementsByTagName('body')[0];
        var $div = $('<div>').addClass('oDiv').append('<div><div class="welcome"><img src="/Shared/images/images-header/welcome.png" alt="Alternate Text" />&emsp;您好！欢迎来到' + collegeTitle + '</div><div class="person"></div> ');
        $(body).prepend($div);
    }
    if (isLogin()) {
        overtimeExit();
        //192.168.0.184:8100
        $('.oDiv .person').html('<img src="/Shared/images/images-header/person.png" alt="Alternate Text" />&nbsp;<span>' + user_name + '&emsp;</span><a href="' + getStuDomainBySysVersion() + '/workspace/myCenter-resume?token=' + access_token + '&formUrl=1' + '" target="_blank" id="PersonalCenter">&emsp;个人中心&emsp;</a><a href="javascript:void(0);" onclick="exit();">&emsp;退出</a>');
    } else {
        $('.oDiv .person').html('');
        access_token = '';
        localStorage.clear();
    }
}
// 注销登录
function exit() {
    //清理缓存
    localStorage.clear();
    //查询cookie
    var is_author = getCookie('isauthorizedlogin');
    if (!isNull(is_author) && eval(is_author.toLowerCase())) {
        var href = window.location.href;
        var isauther = href.indexOf('?authorization_code');
        if (isauther > -1) {
            isauther = href.substring(0, isauther - 1);
            window.location.href = "https://sso.goworkla.cn/home/loginout?callback=" + isauther + "";
        }
        else
            location.reload();
    }
    else {
        location.reload();
    }
}
//超过十分钟未交互，则强制退出账号
function overtimeExit() {
    var maxTime = 60 * 10;
    var time = maxTime;
    $('body').on('keydown mousemove mousedown', function (e) {
        time = maxTime; // reset
    });
    var intervalId = setInterval(function () {
        time--;
        if (time <= 0) {
            if (isLogin()) {
                alert('十分钟未操作页面，即将强制退出账号');
                clearInterval(intervalId);
                exit();
            }
        }
    }, 1000)
}
//统计浏览量
function bowerCount(id) {
    var source = window.location.href,
        client = "",
        token = "",
        account_id = "",
        infoid = "",
        firstindex = '',
        lastindex = '';
    if (source.indexOf("campustalkdetail") > 0) {
        type = "campustalk";
        firstindex = source.indexOf('id-') + 3;
        lastindex = source.indexOf('/nid');
        infoid = source.substring(firstindex, lastindex);
        alonebowerCount({ id: infoid, type: type});
    }
    else if (source.indexOf("milkrounddetail") > 0) {
        type = "milkround";
        firstindex = source.indexOf('id-') + 3;
        lastindex = source.indexOf('/nid');
        infoid = source.substring(firstindex, lastindex);
        alonebowerCount({ id: infoid, type: type });
    }
    else if (source.indexOf("position_details") > 0) {
        type = "position";
        if (isNull(id))
            return false;
        else
            infoid = id;
        alonebowerCount({ id: infoid, type: type });
    }
    else if (source.indexOf("companydetail") > 0) {
        type = "department";
        if (isNull(id))
            return false;
        else
            infoid = id;
    }
    else if (source.indexOf("newslist") > 0 || source.indexOf("newsdetail") > 0)
        type = "article";
    else
        type = "collegesite";
    if (isNull(infoid))
        infoid = collegeid
    if (isPC()) {
        client = "EmploymentNet_Pc";
    }
    else {
        client = "EmploymentNet_wap";
    }
    if (isLogin()) {
        token = access_token;
        account_id = accountid;
    }
    var value = {
        "stype": type,
        "source": source,
        "infoid": infoid,
        "client": client,
        "accountid": account_id,
        "token": token
    }
    postDataByAgent('/statistic/brower/create', value);
}
//单独统计就业网的浏览量
function alonebowerCount(data) {
    postData("/statistic/university/brower/create", data);
}
/*******************************************系统版本相关start************************************************/
// 根据系统版本得到企业端域名
function getCompanyDomainBySysVersion(version) {
    if (isNull(version)) {
        version = systemVersion;
    }
    version = parseInt(version);
    switch (version) {
        case 0: // 测试版
            return 'http://employerc.test.goworkla.cn';
        case 1: // 正式版
            return 'https://employerc.goworkla.cn';
        case 2: // 准正式
            return 'http://employerc.test2.goworkla.cn';

        default: // 本地测试
            return 'http://192.168.0.120:809';
    }
}
// 企业端登录
function loginByCompany() {
    var url = getCompanyDomainBySysVersion();
    url += '/#/login?type=login&id=' + collegeid;
    window.open(url);
    // http://employerc.goworkla.cn/#/login
}
// 根据系统版本得到管理端域名
function getMgmtDomainBySysVersion(version) {
    if (isNull(version)) {
        version = systemVersion;
    }
    version = parseInt(version);
    switch (version) {
        case 0: // 测试版
            return 'http://college.test.goworkla.cn';
        case 1: // 正式版
            return 'http://college.goworkla.cn';
        case 2: // 准正式
            return 'http://college.test2.goworkla.cn';

        default: // 本地测试
            return 'http://192.168.0.94:94';
    }
}
// 管理端登录
function loginByMgmt() {
    var url = getMgmtDomainBySysVersion();
    url += '/login.html?' + collegeid;
    window.open(url);
    // http://college.goworkla.cn/
}
// 根据系统版本得到学生端域名
function getStuDomainBySysVersion(version) {
    if (isNull(version)) {
        version = systemVersion;
    }
    version = parseInt(version);
    switch (version) {
        case 0: // 测试版
            return 'http://talent.test.goworkla.cn/#';
        case 1: // 正式版
            return 'http://talent.goworkla.cn/#';
        case 2: // 准正式
            return 'http://talent.test2.goworkla.cn/#';

        default: // 本地测试
            return 'http://192.168.0.57:4200/#';
    }
}
// 学生端登录
function loginByStudent() {
    var url = getStuDomainBySysVersion();
    url += '/login?' + collegeid;
    window.open(url);
    // http://talent.goworkla.cn/#/login
}
// 得到绑定手机号HTML
function getBindPhoneHtml(url) {
    if (isNull(url)) {
        return '';
    }
    return '<div class="d-left"><img class="resume" src="/Shared/images/images-public/resume.png" alt="Alternate Text" /></div><div class="d-right" ><p id="reason">您暂未绑定手机号！</p><p>请前往学生管理中心绑定手机号</p><a id="finish" href="' + url + '" target="_blank">现在去绑定&nbsp; ></a></div >';
}
/*******************************************系统版本相关end************************************************/
// 错误提示
function showWarnningMsg(msg) {
    alert(msg);
    return false;
}
//警告提示
function showErrMsg(data) {
    alert(JSON.parse(data.responseText).Errmsg);
    return false;
}
// 分页页面跳转
function goPage(url, total) {
    var page = $('#txtGoPage').val();
    page || (page = 1);
    parseInt(page) < 1 && (page = 1);
    (parseInt(page) <= parseInt(total)) && (window.location.href = url + page);
}

